<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>4.1.8.1. GPIO Overview &mdash; Maasu Internship 4 1 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../../../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../../../../_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="../../../../_static/sphinx-data-viewer/jsonview.bundle.css?v=f6ef2277" />
      <link rel="stylesheet" type="text/css" href="../../../../_static/sphinx-needs/libs/html/datatables.min.css?v=4b4fd840" />
      <link rel="stylesheet" type="text/css" href="../../../../_static/sphinx-needs/common.css?v=bd9ab754" />
      <link rel="stylesheet" type="text/css" href="../../../../_static/sphinx-needs/layouts.css?v=448c382f" />
      <link rel="stylesheet" type="text/css" href="../../../../_static/sphinx-needs/styles.css?v=6c8eb985" />
      <link rel="stylesheet" type="text/css" href="../../../../_static/sphinx-needs/modern.css?v=ffa536d2" />

  
  <!--[if lt IE 9]>
    <script src="../../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../../../../_static/documentation_options.js?v=29a6c3e3"></script>
        <script src="../../../../_static/doctools.js?v=9bcbadda"></script>
        <script src="../../../../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="../../../../_static/sphinx-data-viewer/jsonview.bundle.js?v=18cd53c5"></script>
        <script src="../../../../_static/sphinx-data-viewer/jsonview_loader.js?v=f7ff7e7d"></script>
        <script src="../../../../_static/sphinx-needs/libs/html/datatables.min.js?v=8a4aee21"></script>
        <script src="../../../../_static/sphinx-needs/libs/html/datatables_loader.js?v=a2cae175"></script>
        <script src="../../../../_static/sphinx-needs/libs/html/sphinx_needs_collapse.js?v=f783d6a5"></script>
    <script src="../../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" />
    <link rel="next" title="4.1.8.2. Clock initialization" href="clock.html" />
    <link rel="prev" title="4.1.8. Muhamed Sjekirica Lessons" href="lessons.html" />
<link href="../../../../_static/style.css" rel="stylesheet" type="text/css">

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../../../index.html" class="icon icon-home">
            Maasu Internship 4
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../introduction/introduction.html">1. Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../fundamentals/fundamentals.html">2. Fundamentals</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../environment_setup/environment_setup.html">3. Development Environment Setup</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../lessons.html">4. Lessons</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../lessons.html">4.1. Lessons written by each intern</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../amina-cehaja/lessons.html">4.1.1. Lessons by Amina Cehaja</a></li>
<li class="toctree-l3"><a class="reference internal" href="../asja-resic/lessons.html">4.1.2. Lessons by Asja Resic</a></li>
<li class="toctree-l3"><a class="reference internal" href="../dzenana-selimovic/lessons.html">4.1.3. Lessons by Dzenana Selimovic</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ibro-rebronja/lessons.html">4.1.4. Lessons by Ibro Rebronja</a></li>
<li class="toctree-l3"><a class="reference internal" href="../lamija-colakovic/lessons.html">4.1.5. Lessons by Lamija Colakovic</a></li>
<li class="toctree-l3"><a class="reference internal" href="../lamija-imamovic/lessons.html">4.1.6. Lessons by Lamija Imamovic</a></li>
<li class="toctree-l3"><a class="reference internal" href="../mirza-bajramovic/lessons.html">4.1.7. Lessons by Mirza Bajramovic</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="lessons.html">4.1.8. Muhamed Sjekirica Lessons</a><ul class="current">
<li class="toctree-l4 current"><a class="current reference internal" href="#">4.1.8.1. GPIO Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="clock.html">4.1.8.2. Clock initialization</a></li>
<li class="toctree-l4"><a class="reference internal" href="usart.html">4.1.8.3. USART</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../samir-dosljak/lessons.html">4.1.9. Lessons by Dino Javor</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../requirements/requirements.html">5. Requirements</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../faqs/faqs.html">6. Frequently Asked Questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../glossary/glossary.html">7. Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../resources/resources.html">8. Resources</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../index.html">Maasu Internship 4</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../lessons.html"><span class="section-number">4. </span>Lessons</a></li>
          <li class="breadcrumb-item"><a href="../lessons.html"><span class="section-number">4.1. </span>Lessons written by each intern</a></li>
          <li class="breadcrumb-item"><a href="lessons.html"><span class="section-number">4.1.8. </span>Muhamed Sjekirica Lessons</a></li>
      <li class="breadcrumb-item active"><span class="section-number">4.1.8.1. </span>GPIO Overview</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../../_sources/userdoc/lessons/interns/muhamed-sjekirica/gpio.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="gpio-overview">
<h1><span class="section-number">4.1.8.1. </span>GPIO Overview<a class="headerlink" href="#gpio-overview" title="Link to this heading"></a></h1>
<p>They act as the interface between the microcontroller and external devices.
Each GPIO pin can be configured to either send data out (output mode) or receive data in (input mode),
allowing the microcontroller to interact with sensors, LEDs, motors, and more.
GPIO is a foundational skill for embedded development.</p>
<p>GPIO Registers control GPIO operations, and each GPIO port on the microcontroller has its own set of registers.
Key registers include:</p>
<blockquote>
<div><dl>
<dt>MODER (Mode Register):</dt><dd><p>Defines the functional mode of each pin: input, output, analog, or alternate function.
The MODER register has two bits per pin, with each bit pair representing one of four modes:input mode,General-purpose output mode,alternate function mode,analog mode</p>
</dd>
<dt>PUPDR (Pull-Up/Pull-Down Register):</dt><dd><p>Controls the input state of the pin, specifying whether it is connected internally to a pull-up resistor, pull-down resistor, or neither (floating).
Each pin has a pair of bits in the PUPDR register, set as follows:No pull-up or pull-down (floating),Pull-up,Pull-down</p>
</dd>
<dt>OTYPER (Output Type Register):</dt><dd><p>Specifies whether an output pin is configured as push-pull or open-drain.
This setting affects how the pin drives the load:</p>
<blockquote>
<div><p>Push-Pull: The pin can actively drive high and low signals.
Open-Drain: The pin can only drive low; an external pull-up resistor is needed for high logic.</p>
</div></blockquote>
</dd>
</dl>
<p>OSPEEDR (Output Speed Register): - Sets the output speed (low, medium, fast, high) for each pin, which also affects the strength ofix the output signal.</p>
<p>AFR (Alternate Function Register): - Configures the pin to work with an alternate function, such as a peripheral interface (e.g., USART, SPI, or PWM).</p>
<p>IDR (Input Data Register): - Used to read the current logical level (high or low) of each input pin, providing real-time data about the state of external signals connected to the pins.</p>
<p>ODR (Output Data Register): - Used to set the logical level of each output pin directly.
Writing a high or low value to a bit in ODR changes the output state of the corresponding GPIO pin.</p>
<p>BSRR (Bit Set/Reset Register): - A specialized register that allows setting or clearing individual pins without affecting the other bits in the ODR register.</p>
</div></blockquote>
<dl class="simple">
<dt>GPIO Modes and Configurations GPIO pins can be configured in various modes:</dt><dd><dl class="simple">
<dt>Input Mode:</dt><dd><p>Configures the pin to receive external signals.
When reading sensor data or monitoring signals, input mode is necessary.</p>
</dd>
<dt>Output Mode:</dt><dd><p>Configures the pin to send data or signals to external devices.
Output pins can be set to either push-pull or open-drain mode, depending on the required drive characteristics.</p>
</dd>
<dt>Analog Mode:</dt><dd><p>Sets the pin for analog functions, typically used when the pin is connected to an Analog-to-Digital Converter (ADC) or Digital-to-Analog Converter (DAC).
This mode is useful for processing signals from analog sensors.</p>
</dd>
<dt>Alternate Function Mode:</dt><dd><p>Enables the pin to work with other peripherals like USART, SPI, I2C, timers, and PWM.
Each pin can support multiple alternate functions, which can be selected through the AFR register.</p>
</dd>
</dl>
</dd>
</dl>
<p>To configure GPIO pins effectively, we need to understand the purpose of each mode and register.</p>
<dl class="simple">
<dt>GPIO in Practical Applications GPIO pins provide the hardware interface for microcontrollers to interact with the external world. Here are some practical uses:</dt><dd><p>Digital Control: - Control devices like LEDs, relays, and small motors. - Output pins are used to send signals, while input pins can detect the status of external digital sensors.
Signal Monitoring: - Used in applications that require monitoring high/low states from external devices (e.g., checking if a door is open or closed).
Communication: - GPIO pins in alternate function mode allow the microcontroller to communicate with other devices using protocols like UART, SPI, and I2C.
PWM (Pulse Width Modulation): - Some GPIO pins can generate PWM signals in alternate function mode, useful for applications like motor control or LED dimming.
Interrupt Handling: - Many GPIO pins can be configured to trigger interrupts on specific events, such as a change in state (e.g., a button press). - Interrupts allow the microcontroller to respond immediately to events, which is essential for responsive systems.</p>
</dd>
</dl>
<hr class="docutils" />
<p>The most important features for GPIO in STM32F411xC/E</p>
<blockquote>
<div><p>-Up to 16 I/Os under control
-Modes: Each I/O can be configured as:</p>
<blockquote>
<div><p>Input: Floating, pull-up, pull-down, or analog
Output: Push-pull or open-drain with pull-up or pull-down
Alternate function: Push-pull or open-drain with pull-up/down capability.</p>
</div></blockquote>
<p>-GPIO pins can be set or reset using the GPIOx_BSRR register for efficient control
-The GPIOx_LCKR register locks the configuration to prevent accidental changes
-Output speed for each pin can be selected for optimized performance</p>
</div></blockquote>
<dl class="simple">
<dt>Each GPIO pin can be individually configured into one of the following modes:</dt><dd><dl class="simple">
<dt>Input Modes:</dt><dd><p>Floating: The pin is not connected to any internal resistor and is left floating
Pull-up: The pin is connected to Vdd through a pull-up resistor
Pull-down: The pin is connected to GND through a pull-down resistor
Analog: The pin is set to work with analog signals</p>
</dd>
<dt>Output Modes:</dt><dd><p>Open-drain: The pin can pull the line low but requires an external pull-up resistor to pull the line high. Can be configured with pull-up or pull-down resistors.
Push-pull: The pin can actively drive both high and low levels. Can also be configured with pull-up or pull-down resistors.</p>
</dd>
<dt>Alternate Function Modes:</dt><dd><p>Alternate Function Push-pull: The pin is configured for an alternate peripheral function (e.g., UART, SPI) and works in push-pull mode, with the option to use pull-up or pull-down resistors.
Alternate Function Open-drain: The pin is configured for an alternate peripheral function and works in open-drain mode, with the option for pull-up or pull-down resistors.</p>
</dd>
</dl>
</dd>
</dl>
<p>Each I/O port bit is freely programmable, however the I/O port registers have to be
accessed as 32-bit words, half-words or bytes. The purpose of the GPIOx_BSRR register is
to allow atomic read/modify accesses to any of the GPIO registers.</p>
<p>When the system is reset (just powered on or after a reset), all the GPIO pins are set to input floating mode.
This means the pins are not connected to anything internally, so they can “float” (have an undefined state) unless you specifically configure them.</p>
<p>When a GPIO pin is configured as an output, the value you write to the Output Data Register (GPIOx_ODR) will be sent to the pin.
This means if you set a bit in the register to 1 or 0, the corresponding pin will output that value.
The pin can be in two output modes:</p>
<blockquote>
<div><p>Push-pull mode: The pin can drive both high and low values.
Open-drain mode: The pin can only pull the line low (when the pin is set to 0), and it needs an external pull-up resistor to pull the line high when it’s not actively driven.</p>
</div></blockquote>
<p>The Input Data Register (GPIOx_IDR) reads the value from the GPIO pin.
The value of the pin (whether it’s high or low) is sampled on each AHB clock cycle (this happens continuously).</p>
<p>All GPIO pins have weak internal pull-up and pull-down resistors.
These resistors can be enabled or disabled through the GPIOx_PUPDR register.</p>
<blockquote>
<div><p>Pull-up: The resistor pulls the pin to a high state (Vdd).
Pull-down: The resistor pulls the pin to a low state (GND).
These internal resistors are useful for setting the default state of the pin when it’s not actively driven.</p>
</div></blockquote>
<p>The microcontroller has pins that can be connected to onboard peripherals.Each pin is connected to a multiplexer which can route pin’s function to diffrent peripherals,
but only one function can be active at a time on each pin.
Each pin has 16 alternate functions(AF0 TO AF15).
After reset all pins are connected to AF0 which is default alternate function.
AF1 to AF13-these are mapped to various peripherals and functionalities(UART,SPI..).
AF15 - specifically used for Cortex-M4 with FPU EVENTOUT.</p>
<p>Peripherals have alternate functions that can be mapped to diffrent I/O pins allowing efficient use of available pins.
To connect pin to a system function - AF0:</p>
<blockquote>
<div><p>JTAG/SWD pins-after a reset,these pins are reserverd for debbuging(not controlled by GPIO)
RTC_REFIN - this pin should be in input floating mode
MCO1 and MCO2 - these need to be configured in alternate function mode</p>
</div></blockquote>
<p>We can configure wanted I/O  as output or input  in the GPIOx_MODER register.</p>
<p>Peripheral alternate function:
For the ADC, configure the desired I/O as analog in the GPIOx_MODER register.
For other peripherals:</p>
<blockquote>
<div><p>Configure the desired I/O as an alternate function in the GPIOx_MODER register
Select the type, pull-up/pull-down and output speed via the GPIOx_OTYPER,
GPIOx_PUPDR and GPIOx_OSPEEDR registers
Connect the I/O to the desired AFx in the GPIOx_AFRL or GPIOx_AFRH register</p>
</div></blockquote>
<dl class="simple">
<dt>GPIO Control Registers:</dt><dd><p>GPIOx_MODER: Configures the I/O direction (input, output, alternate function, or analog).
GPIOx_OTYPER: Defines the output type (push-pull or open-drain).
GPIOx_OSPEEDR: Configures the speed of the I/O pin.
GPIOx_PUPDR: Configures the pull-up or pull-down resistors for the I/O.</p>
</dd>
<dt>I/O Port Data Registers:</dt><dd><p>GPIOx_ODR: Output Data Register, where data to be output is stored (read/write accessible).
GPIOx_IDR: Input Data Register, where input data is stored (read-only).</p>
</dd>
<dt>Bitwise Handling (GPIOx_BSRR):</dt><dd><p>GPIOx_BSRR allows you to set or reset individual bits in GPIOx_ODR.
Atomic operation: It allows bitwise manipulation without the need for disabling interrupts. Writing to GPIOx_BSRR does not lock the bits, and they can be accessed directly.</p>
</dd>
<dt>GPIO Locking Mechanism:</dt><dd><p>GPIOx_LCKR: The lock register freezes the configuration of GPIO pins. After a correct sequence, it locks the configuration until the next reset.
The LOCK sequence requires a 32-bit access to ensure that bits in the control registers cannot be modified after being locked.</p>
</dd>
<dt>Alternate Function (AF) Input/Output:</dt><dd><p>GPIOx_AFRL and GPIOx_AFRH: Registers that allow you to select from 16 alternate functions for each I/O pin.
These alternate functions can be peripherals like UART, SPI, etc., and you can only select one function for each pin at a time.</p>
</dd>
<dt>External Interrupts/Wakeup:</dt><dd><p>All GPIO ports can be configured to handle external interrupts. The pin must be in input mode for this.
The configuration for wake-up events is handled by the EXTI module.</p>
</dd>
<dt>Input Configuration:</dt><dd><dl class="simple">
<dt>When an I/O is set as an input:</dt><dd><p>The output buffer is disabled.
The Schmitt trigger input is enabled.
The pull-up/pull-down resistors are activated depending on the GPIOx_PUPDR setting.
The input data is sampled every clock cycle and can be read from the GPIOx_IDR.</p>
</dd>
</dl>
</dd>
<dt>Output Configuration:</dt><dd><dl class="simple">
<dt>When the I/O port is programmed as output:</dt><dd><p>The output buffer is enabled
The Schmitt trigger input is activated.
The weak pull-up and pull-down resistors are activated.
The data present on the I/O pin are sampled into the input data register every AHB clock cycle
A read access to the input data register gets the I/O state
A read access to the output data register gets the last written value</p>
</dd>
</dl>
</dd>
<dt>Alternate function configuration</dt><dd><dl class="simple">
<dt>When the I/O port is programmed as alternate function:</dt><dd><p>The output buffer can be configured as open-drain or push-pull
The output buffer is driven by the signal coming from the peripheral (transmitter enable and data)
The Schmitt trigger input is activated
The weak pull-up and pull-down resistors are activated or not depending on the valuein the GPIOx_PUPDR register
The data present on the I/O pin are sampled into the input data register every AHBclock cycle
A read access to the input data register gets the I/O state</p>
</dd>
</dl>
</dd>
<dt>Analog configuration</dt><dd><dl class="simple">
<dt>When the I/O port is programmed as analog configuration:</dt><dd><p>The output buffer is disabled
The Schmitt trigger input is deactivated, providing zero consumption for every analogalue of the I/O pin.
The output of the Schmitt trigger is forced to a constant value (0).
The weak pull-up and pull-down resistors are disabled
Read access to the input data register gets the value “0”</p>
</dd>
</dl>
</dd>
</dl>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="lessons.html" class="btn btn-neutral float-left" title="4.1.8. Muhamed Sjekirica Lessons" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="clock.html" class="btn btn-neutral float-right" title="4.1.8.2. Clock initialization" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, Maasu BH d.o.o..</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>
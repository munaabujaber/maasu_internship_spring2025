<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>4.1.3.3. Lesson 3 - USART &mdash; Maasu Internship 4 1 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../../../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../../../../_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="../../../../_static/sphinx-data-viewer/jsonview.bundle.css?v=f6ef2277" />
      <link rel="stylesheet" type="text/css" href="../../../../_static/sphinx-needs/libs/html/datatables.min.css?v=4b4fd840" />
      <link rel="stylesheet" type="text/css" href="../../../../_static/sphinx-needs/common.css?v=bd9ab754" />
      <link rel="stylesheet" type="text/css" href="../../../../_static/sphinx-needs/styles.css?v=6c8eb985" />
      <link rel="stylesheet" type="text/css" href="../../../../_static/sphinx-needs/layouts.css?v=448c382f" />
      <link rel="stylesheet" type="text/css" href="../../../../_static/sphinx-needs/modern.css?v=ffa536d2" />

  
  <!--[if lt IE 9]>
    <script src="../../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../../../../_static/documentation_options.js?v=29a6c3e3"></script>
        <script src="../../../../_static/doctools.js?v=9bcbadda"></script>
        <script src="../../../../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="../../../../_static/sphinx-data-viewer/jsonview.bundle.js?v=18cd53c5"></script>
        <script src="../../../../_static/sphinx-data-viewer/jsonview_loader.js?v=f7ff7e7d"></script>
        <script src="../../../../_static/sphinx-needs/libs/html/datatables.min.js?v=8a4aee21"></script>
        <script src="../../../../_static/sphinx-needs/libs/html/datatables_loader.js?v=a2cae175"></script>
        <script src="../../../../_static/sphinx-needs/libs/html/sphinx_needs_collapse.js?v=f783d6a5"></script>
    <script src="../../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" />
    <link rel="next" title="4.1.4. Lessons by Ibro Rebronja" href="../ibro-rebronja/lessons.html" />
    <link rel="prev" title="4.1.3.2. Lesson 2 - GPIO" href="gpio.html" />
<link href="../../../../_static/style.css" rel="stylesheet" type="text/css">

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../../../index.html" class="icon icon-home">
            Maasu Internship 4
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../introduction/introduction.html">1. Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../fundamentals/fundamentals.html">2. Fundamentals</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../environment_setup/environment_setup.html">3. Development Environment Setup</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../lessons.html">4. Lessons</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../lessons.html">4.1. Lessons written by each intern</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../amina-cehaja/lessons.html">4.1.1. Lessons by Amina Cehaja</a></li>
<li class="toctree-l3"><a class="reference internal" href="../asja-resic/lessons.html">4.1.2. Lessons by Asja Resic</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="lessons.html">4.1.3. Lessons by Dzenana Selimovic</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="clock.html">4.1.3.1. Lesson 1 - CLOCK</a></li>
<li class="toctree-l4"><a class="reference internal" href="gpio.html">4.1.3.2. Lesson 2 - GPIO</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">4.1.3.3. Lesson 3 - USART</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../ibro-rebronja/lessons.html">4.1.4. Lessons by Ibro Rebronja</a></li>
<li class="toctree-l3"><a class="reference internal" href="../lamija-colakovic/lessons.html">4.1.5. Lessons by Lamija Colakovic</a></li>
<li class="toctree-l3"><a class="reference internal" href="../lamija-imamovic/lessons.html">4.1.6. Lessons by Lamija Imamovic</a></li>
<li class="toctree-l3"><a class="reference internal" href="../mirza-bajramovic/lessons.html">4.1.7. Lessons by Mirza Bajramovic</a></li>
<li class="toctree-l3"><a class="reference internal" href="../muhamed-sjekirica/lessons.html">4.1.8. Muhamed Sjekirica Lessons</a></li>
<li class="toctree-l3"><a class="reference internal" href="../samir-dosljak/lessons.html">4.1.9. Lessons by Dino Javor</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../requirements/requirements.html">5. Requirements</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../faqs/faqs.html">6. Frequently Asked Questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../glossary/glossary.html">7. Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../resources/resources.html">8. Resources</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../index.html">Maasu Internship 4</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../lessons.html"><span class="section-number">4. </span>Lessons</a></li>
          <li class="breadcrumb-item"><a href="../lessons.html"><span class="section-number">4.1. </span>Lessons written by each intern</a></li>
          <li class="breadcrumb-item"><a href="lessons.html"><span class="section-number">4.1.3. </span>Lessons by Dzenana Selimovic</a></li>
      <li class="breadcrumb-item active"><span class="section-number">4.1.3.3. </span>Lesson 3 - USART</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../../_sources/userdoc/lessons/interns/dzenana-selimovic/usart.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="lesson-3-usart">
<h1><span class="section-number">4.1.3.3. </span>Lesson 3 - USART<a class="headerlink" href="#lesson-3-usart" title="Link to this heading"></a></h1>
<section id="overview">
<h2><span class="section-number">4.1.3.3.1. </span>Overview<a class="headerlink" href="#overview" title="Link to this heading"></a></h2>
<p>USART (Universal Synchronous/Asynchronous Receiver/Transmitter) is a critical hardware feature in the STM32F411 microcontroller, enabling efficient serial communication. Unlike the UART, which supports only asynchronous communication, USART supports both asynchronous and synchronous modes, making it more versatile for various communication needs. In this document, we will explore the key features, configuration, and usage of USART on the STM32F411.</p>
<blockquote>
<div><p>Key Features of USART in STM32F411:</p>
</div></blockquote>
<ul class="simple">
<li><p><strong>Asynchronous Communication</strong>: This mode is the most commonly used in serial communication (e.g., RS232, RS485). Data is transmitted sequentially one bit at a time, without the need for a clock signal. Start and stop bits indicate the beginning and end of data transmission.</p></li>
<li><p><strong>Synchronous Communication</strong>: In this mode, data and clock signals are transmitted simultaneously, providing a faster and more efficient method of communication, typically used for higher baud rates.</p></li>
<li><p><strong>Interrupts and DMA Support</strong>: USART supports both interrupts and DMA (Direct Memory Access) to handle data transmission and reception efficiently. These features offload the processor, improving performance and reducing CPU usage.</p></li>
<li><p><strong>Multiple USART Modules</strong>: The STM32F411 supports four USART/UART modules:
- <strong>USART1</strong>
- <strong>USART2</strong>
- <strong>USART3</strong>
- <strong>UART4</strong> (which can also be used as USART)</p></li>
</ul>
</section>
<section id="baud-rate-and-communication">
<h2><span class="section-number">4.1.3.3.2. </span>Baud Rate and Communication<a class="headerlink" href="#baud-rate-and-communication" title="Link to this heading"></a></h2>
<p>The <strong>baud rate</strong> is the number of bits transmitted per second. It is essential that both devices communicating over USART have the same baud rate to ensure reliable data transmission. Mismatched baud rates can cause errors in communication.</p>
<p>### Important Considerations:
- <strong>Baud Rate Matching</strong>: For proper communication, both devices (e.g., microcontroller and PC) must have matching baud rates. If they differ, data corruption may occur, leading to errors in communication.
- <strong>Oversampling</strong>: The default oversampling rate is 16, but it can be adjusted to 8 for higher data rates or reduced accuracy.</p>
</section>
<section id="dma-in-usart-communication">
<h2><span class="section-number">4.1.3.3.3. </span>DMA in USART Communication<a class="headerlink" href="#dma-in-usart-communication" title="Link to this heading"></a></h2>
<p>Using <strong>DMA (Direct Memory Access)</strong> for data transfer between USART and memory is a powerful feature for improving performance. It allows data to be transferred without CPU intervention, reducing processing time and improving system efficiency.</p>
<p>### Benefits of Using DMA:
- <strong>Increased Efficiency</strong>: By offloading data transfer from the CPU, DMA reduces the processor’s workload, allowing it to perform other tasks simultaneously.
- <strong>Reduced Latency</strong>: DMA transfers data faster, especially for large data sets, as the CPU is not involved in each byte’s transmission.
- <strong>Fewer Errors and Higher Speed</strong>: DMA ensures more reliable and faster communication by avoiding delays and errors caused by CPU interference.</p>
</section>
<section id="configuring-usart-on-stm32f411">
<h2><span class="section-number">4.1.3.3.4. </span>Configuring USART on STM32F411<a class="headerlink" href="#configuring-usart-on-stm32f411" title="Link to this heading"></a></h2>
<p>To configure USART communication on the STM32F411, several steps are involved, including enabling clocks, configuring GPIO pins, and setting the baud rate.</p>
<p>To begin using the USART peripheral, enable the USART clock in the <strong>RCC (Reset and Clock Control)</strong> register.</p>
<p>Each USART peripheral uses specific GPIO pins for data transmission (TX) and reception (RX). These pins must be configured for alternate function mode and mapped to the appropriate alternate function (AF).</p>
<ul class="simple">
<li><p><strong>USART1</strong>:
- TX: PA9 or PB6
- RX: PA10 or PB7
- Alternate Function: AF7</p></li>
<li><p><strong>USART2</strong>:
- TX: PA2 or PD5
- RX: PA3 or PD6
- Alternate Function: AF7</p></li>
<li><p><strong>USART3</strong>:
- TX: PB10 or PC10
- RX: PB11 or PC11
- Alternate Function: AF7</p></li>
</ul>
<p>Configuring USART Mode:
- <strong>RX, TX, or Both</strong>: Select whether the USART will operate in <strong>RX only</strong>, <strong>TX only</strong>, or <strong>both RX and TX</strong> modes by setting the appropriate bits in the USART control register (CR1).
- <strong>Enable USART</strong>: Set the <strong>UE</strong> bit (USART Enable) in the CR1 register to enable the USART.
- <strong>Enable Transmitter and Receiver</strong>: Set the <strong>TE</strong> (Transmitter Enable) and <strong>RE</strong> (Receiver Enable) bits to enable data transmission and reception.</p>
</section>
<section id="data-transmission">
<h2><span class="section-number">4.1.3.3.5. </span>Data Transmission<a class="headerlink" href="#data-transmission" title="Link to this heading"></a></h2>
<p>To transmit data via USART, follow these steps:</p>
<ol class="arabic simple">
<li><p><strong>Wait for TXE Flag</strong>: Check the TXE (Transmit Data Register Empty) flag in the Status Register (SR) to ensure that the transmit data register is ready for new data.</p></li>
<li><p><strong>Write Data</strong>: Write the data to the <strong>DR (Data Register)</strong> for transmission. Repeat this process for each byte of data.</p></li>
</ol>
<p>### Transmitting Buffers:
When transmitting multiple bytes (e.g., a buffer), write each byte sequentially to the data register. Ensure that the TXE flag is checked before sending the next byte.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="gpio.html" class="btn btn-neutral float-left" title="4.1.3.2. Lesson 2 - GPIO" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../ibro-rebronja/lessons.html" class="btn btn-neutral float-right" title="4.1.4. Lessons by Ibro Rebronja" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, Maasu BH d.o.o..</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>